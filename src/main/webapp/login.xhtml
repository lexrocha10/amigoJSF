<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:composition template="principal.xhtml">
        <ui:define name="titulo">Tela de Login</ui:define>
        <ui:define name="content">

            <h:panelGrid columns="1" cellpadding="20" style="margin-left: 40%">
                <p:commandButton value="Login" type="button" style="width: 200px; height: 50px" onclick="PF('dlg2').show();" />
                <p:commandButton value="Cadastrar" type="button" style="width: 200px; height: 50px" onclick="PF('dlg1').show();" />
            </h:panelGrid>

            <p:dialog header="Login" widgetVar="dlg2" minHeight="40" showEffect="explode" hideEffect="bounce">
                <h:form id="form_login">
                    <p:growl id="message2" sticky="false" showDetail="false" life="4000"/>
                    <p:panelGrid columns="2" id="panelLogin" columnClasses="label, value" style="text-align: left;" 
                                 styleClass="cadastros">

                        <p:outputLabel for="usuario" value="Usuário: " />
                        <p:inputText id="usuario" value="#{loginBean.login.usuario}"
                                     required="true" requiredMessage="Informe um usuário"/>

                        <p:outputLabel for="senha" value="Senha: " />
                        <p:password id="senha" value="#{loginBean.login.senha}" label="Senha"
                                    required="true" requiredMessage="Informe uma senha"/>
                        <center>
                            <p:commandButton action="#{loginBean.entrar()}" value="Entrar" update="message2 @form"/>
                        </center>
                    </p:panelGrid>
                </h:form>
            </p:dialog>

            <p:dialog header="Cadastrar novo participante" widgetVar="dlg1" minHeight="40"
                      showEffect="explode" hideEffect="bounce">
                <h:form id="form_cadastro">
                    <p:growl id="message1" sticky="false" showDetail="false" life="4000"/>
                    <p:panelGrid columns="2" id="panelCadastro" columnClasses="label, value" style="text-align: left;" styleClass="cadastros">
                        <p:outputLabel for="usuario1" value="Usuário: " />
                        <p:inputText id="usuario1" value="#{loginBean.cadastro.usuario}"
                                     required="true" requiredMessage="Informe um usuário"/>

                        <p:outputLabel for="senha1" value="Senha: " />
                        <p:password id="senha1" value="#{loginBean.cadastro.senha}" label="Senha"
                                    required="true" match="senha2" requiredMessage="Informe uma senha"
                                    validatorMessage="Os campos 'Senha' não são iguais" />

                        <p:outputLabel for="senha2" value="Confirmar senha: " />
                        <p:password id="senha2" value="#{loginBean.cadastro.senha}" label="Confirmar senha"
                                    required="true" match="senha2" requiredMessage="Informe uma senha"/>
                        <center>
                            <p:commandButton action="#{loginBean.salvar()}" value="Salvar" update="message1"/>
                        </center>
                    </p:panelGrid>
                </h:form>
            </p:dialog>

        </ui:define>
    </ui:composition>
</html>